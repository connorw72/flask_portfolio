<!DOCTYPE html>
{% extends "layouts/base.html" %}
{% block head %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pet Guess</title>

    <script>
        var words = ["cat","dog","frog","turtle","bird","fish","horse","chinchilla","hamster","rabbit","mouse","pig","ferret","lizard","snake","hedgehog","platypus"] // array for words
        var word = words[Math.floor(Math.random() * words.length)]; // random gen a word
        var lives = 0
        function inputWord() {
            word = document.getElementById("input_word").value // rewrites the randomly generated word to the user's input
            inputToggle()
            // console.log(word + " is the word we are testing")
            lives = 0
            document.getElementById("input_word").value = '';
        }   
        function spacesList() {
            document.getElementById("space").innerHTML = '';
            var spaces = ''
            for (var i = 0; i < word.length; i++) {
                // creating spaces for word length and a life counter
                spaces += "_ ";
                lives += 1
            }
            document.getElementById("space").innerHTML = spaces
            document.getElementById("lives").innerHTML = "You have " + lives + " lives";
            // alert(document.getElementById("space").innerHTML)
        }

        // allows pressing enter as a form to run the function (as opposed to clicking "Guess"), doesn't work for "Choose your own word" because Michael is bad and cannot figure it out
        // Google says its deprecated, but Michael is probably just missing something regarding getElementById
        document.addEventListener("keydown", function(event) {
        if (event.which == 13) {
            petguess()
        }
        }); 

        function petguess() {
            var guessW = document.getElementById("guess_word").value;
            if ( guessW == word ) {
                document.getElementById("space").innerHTML = word
                document.getElementById("guess_word").value = ''; // clears input field
                document.getElementById("lives").innerHTML = "CONGRATULATIONS!" // yay?
                document.body.style.backgroundImage = "url('https://acegif.com/wp-content/gif/confetti-10.gif')" // confetti overlay on the background for a celebration effect
                document.getElementById("reload").style.display = 'inline' // inputs a reload button that reloads the page (effectively resetting the game)
            } else if ( guessW !== word) {
                document.getElementById("guess_word").value = ''; // clears input field
                // alert("wrong, try again")
                lives -= 1
                document.getElementById("lives").innerHTML = "you have " + lives + " lives left"
            }
            if ( lives < 1 ) {
                // alert("Game Over. You stink")
                document.getElementById("reload").style.display = 'inline'
                document.getElementById("guessbtn").style.display = 'none';
                document.getElementById("lives").innerHTML = 'Game Over, Try Again.'
                if ( word === "platypus") // troll
                    document.getElementById("pets").src = "https://c.tenor.com/JtHxeUH0YNgAAAAM/perry-the-platypus-serious.gif"
                
            }
        }

        function inputToggle() {
            if (document.getElementById("array").style.display == 'none') {
                document.getElementById("array").style.display = 'block'
                document.getElementById("petheader").style.display = 'none'
            } else { 
                document.getElementById("array").style.display = 'none'
                document.getElementById("petheader").style.display = 'none'
            }
            // console.log("toggle function worked")
        }
        function FF() {
            alert("weakling, word is " + word) // imagine pressing this button
        }
    </script>


</head>
{% endblock %}

{% block body %}
<body onload="spacesList()">
    <style>
        html,body {
            background-color: lightseagreen;
        }
        .dark-mode {
            background: black;
            color: white;
        }
        /* CSS */
        button {
            background-color: #57e089;
            border-radius: 100px;
            box-shadow: rgba(44, 187, 99, .2) 0 -25px 18px -14px inset,rgba(44, 187, 99, .15) 0 1px 2px,rgba(44, 187, 99, .15) 0 2px 4px,rgba(44, 187, 99, .15) 0 4px 8px,rgba(44, 187, 99, .15) 0 8px 16px,rgba(44, 187, 99, .15) 0 16px 32px;
            color: green;
            cursor: pointer;
            display: inline-block;
            font-family: CerebriSans-Regular,-apple-system,system-ui,Roboto,sans-serif;
            padding: 7px 20px;
            text-align: center;
            text-decoration: none;
            transition: all 250ms;
            border: 0;
            font-size: 16px;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
        }
        button:hover {
            box-shadow: rgba(44,187,99,.35) 0 -25px 18px -14px inset,rgba(44,187,99,.25) 0 1px 2px,rgba(44,187,99,.25) 0 2px 4px,rgba(44,187,99,.25) 0 4px 8px,rgba(44,187,99,.25) 0 8px 16px,rgba(44,187,99,.25) 0 16px 32px;
            transform: scale(1.05) rotate(-1deg);
        }
    </style>
    <div style="text-align: center;">
        <h1 style="margin-top: 10px;">Pet Name Guessing Game</h1>
        <!-- for inputting words on your own-->
        <div id="array" style="display: none;">
            <label for="input_word">Word</label>
            <input type="password" id="input_word" name="input_word">
            <button id="inputbtn" onclick="inputWord(); spacesList(0)">Choose!</button>
        </div>
        <p id="petheader">üê± The Word is a Type of Pet üê∂</p>
        <p id=space></p>
        <label for="guess_word">Guess the Word</label>
        <input id="guess_word" name="guess_word">
        <button id="guessbtn" onclick="petguess()">Guess</button>
        <button onclick="FF()">Give Up</button>
        <br>
        <p id="lives"></p>
        <button style="margin-top: 10px; margin-bottom: 10px"inputToggle" onclick="inputToggle()">Choose Your Own Word</button>
        <button id="reload" style="display: none; text-align: center;" onclick="location.reload();">Restart?</button>    
        <br>
        <img id="place" class="img-responsive py-3" alt="" width="25%" src="https://autumntrailsvet.com/wp-content/uploads/2020/04/We-care-for-many-kinds-of-animals.png" >
    </div>
</body>
</html>
{% endblock %}